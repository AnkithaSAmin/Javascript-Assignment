<script>
    
    
   const shuffle = a => {
  return a.reduce((l, e, i) => {
    const j = Math.floor(Math.random()*(a.length-i)+i); 
    [ a[i], a[j] ] = [ a[j], a[i] ];
    return a;
  }, a)
};

const fixedShuffleIndex = (a, f, str) => {
  w = shuffle(
    a.reduce(
      (acc, e, i) => {
        if (!f[i]) {
          acc.push(e);
        }
        return acc;
      },
      []
    )
  );
  
  return f.reduce(
    (acc, e, i) => {
      if (e) {
        acc.splice(i, 0, a[i]);
      }
      return acc;
    },
    w
  );
  }
  
  




document.write(fixedShuffleIndex([1, 2, 3, 4, 5, 6],[true, false, true, false, true, false]));


</script>